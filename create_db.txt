CREATE TABLE Student (
	sid INT NOT NULL AUTO_INCREMENT,
	username VARCHAR(100) NOT NULL,
	password VARCHAR(32) NOT NULL,
	name VARCHAR(100) NOT NULL,
	gender VARCHAR(10) NOT NULL,
	register_date DATE NOT NULL, 
	PRIMARY KEY (sid)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE Teacher (
	tid INT NOT NULL AUTO_INCREMENT,
	username VARCHAR(100) NOT NULL,
	password VARCHAR(32) NOT NULL,
	name VARCHAR(100) NOT NULL,
	gender VARCHAR(10) NOT NULL,
	register_date DATE NOT NULL,
	PRIMARY KEY (tid)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE Course (
	cid INT NOT NULL AUTO_INCREMENT,
	tid INT NOT NULL,
	name VARCHAR(50) NOT NULL,
	place VARCHAR(50) NOT NULL,
	credit INT NOT NULL,
	started BOOL NOT NULL,
	FOREIGN KEY (tid) REFERENCES Teacher(tid),
	PRIMARY KEY (cid)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE Class (
	lid INT NOT NULL AUTO_INCREMENT,
	cid INT NOT NULL,
	start_time DATETIME,
	latitude DOUBLE,
	longitude DOUBLE,
	FOREIGN KEY (cid) REFERENCES Course(cid),
	PRIMARY KEY (lid)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE StudentCourse (
	sid INT NOT NULL,
	cid INT NOT NULL,
	FOREIGN KEY (sid) REFERENCES Student(sid),
	FOREIGN KEY (cid) REFERENCES Course(cid),
	PRIMARY KEY (sid, cid)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE StudentClass (
	sid INT NOT NULL,
	lid INT NOT NULL,
	checkin_time DATETIME,
	stat VARCHAR(20) NOT NULL,
	FOREIGN KEY (sid) REFERENCES Student(sid),
	FOREIGN KEY (lid) REFERENCES Class(lid),
	PRIMARY KEY (sid, lid)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE Question (
	qid INT NOT NULL AUTO_INCREMENT,
	cid INT NOT NULL,
	raised_time DATETIME NOT NULL,
	content varchar(100) NOT NULL,
	optionA varchar(100) NOT NULL,
	optionB varchar(100) NOT NULL,
	optionC varchar(100) NOT NULL,
	optionD varchar(100) NOT NULL,
	answer  varchar(1) NOT NULL,
	FOREIGN KEY (cid) REFERENCES Course(cid),
	PRIMARY KEY (qid)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE StudentQuestion (
	sid INT NOT NULL,
	qid INT NOT NULL,
	answer varchar(1),
	FOREIGN KEY (sid) REFERENCES Student(sid),
	FOREIGN KEY (qid) REFERENCES Question(qid),
	PRIMARY KEY (sid, qid)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

